# Pet Project: Earthquake Data Pipeline
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é ETL-—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –∏–∑ USGS API.  

![Earthquake Dashboard](images/dashboard.png)  

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```plaintext
USGS API ‚Üí S3 (MinIO) ‚Üí PostgreSQL (DWH) ‚Üí –ê–≥—Ä–µ–≥–∞—Ç—ã –≤ DM —Å–ª–æ–µ ‚Üí Metabase
```

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

Airflow DAGs  
  
raw_from_api_to_s3.py - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ USGS API –≤ S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ  
raw_from_s3_to_pg.py - –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ S3 –≤ DWH (PostgreSQL)  
fct_avg_day.py - –†–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–π –º–∞–≥–Ω–∏—Ç—É–¥—ã –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–π –ø–æ –¥–Ω—è–º  
fct_count_day.py - –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–π –ø–æ –¥–Ω—è–º  
fct_daily_aggregates.py - –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è–º  

## üõ†Ô∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

Apache Airflow - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è ETL-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤  
PostgreSQL - –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö Airflow  
MinIO - S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
Metabase - BI-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö  

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
py -3.12 -m venv venv
.\venv\Scripts\activate
pip install -r req.txt
docker compose up -d
```

## –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º:

* Airflow UI: http://localhost:8080  
* MinIO UI: http://localhost:9001  
* Metabase: http://localhost:3000  

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ –≤ Airflow —Å–ª–µ–¥—É—é—â–∏–µ Variables:  
* access_key - –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ MinIO  
* secret_key - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á MinIO  
* pg_password - –ø–∞—Ä–æ–ª—å PostgreSQL –¥–ª—è DWH  
